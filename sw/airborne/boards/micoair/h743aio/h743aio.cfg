#MCU_MODEL = STM32H743V(G-I)Hx
MCU_MODEL = STM32H743VITx
CHIBIOS_VERSION = 3.0

HEADER
/*
 * Board identifier.
 */
#define BOARD_MICOAIR_743AIO
#define BOARD_NAME                  "Micoair743AIO"

/*
 * Board oscillators-related settings.
 */
#if !defined(STM32_LSECLK)
#define STM32_LSECLK                0
#endif

#define STM32_LSEDRV                (3U << 3U)

#if !defined(STM32_HSECLK)
#define STM32_HSECLK                8000000U
#endif

#define HAL_USE_RTC     TRUE

/*
 * Board voltages.
 * Required for performance limits calculation.
 */
#define STM32_VDD                   300U

/*
 * MCU type as defined in the ST header.
 */
#define STM32H743xx
#define STM32H753xx


/*
 * PWM TIM defines
 * enable TIM1 by default
 */
#ifndef USE_PWM_TIM1
#define USE_PWM_TIM1 1
#endif


CONFIG


# PIN NAME PERIPH_TYPE AF_NUMBER or
# PIN NAME FUNCTION PP_or_OPENDRAIN PIN_SPEED PULL_RESISTOR INITIAL_LEVEL AF_NUMBER
# SPEED : SPEED_VERYLOW, SPEED_LOW, SPEED_MEDIUM, SPEED_HIGH
#
# DEFAULT AND SYS
# 
# 'SYS' => ['ALTERNATE', 'PUSHPULL', 'SPEED_HIGH', 'FLOATING', 'LEVEL_HIGH'],
# 'ADC' => ['ANALOG', 'PUSHPULL', 'SPEED_HIGH', 'FLOATING', 'LEVEL_LOW'],
# 'PWM' => ['ALTERNATE', 'PUSHPULL', 'SPEED_HIGH', 'FLOATING', 'LEVEL_LOW'],
# 'ICU' => ['ALTERNATE', 'PUSHPULL', 'SPEED_HIGH', 'FLOATING', 'LEVEL_HIGH'],
# 'I2C' => ['ALTERNATE', 'OPENDRAIN', 'SPEED_HIGH', 'PULLUP', 'LEVEL_HIGH'],
# 'SPI' => ['ALTERNATE', 'PUSHPULL', 'SPEED_HIGH', 'FLOATING', 'LEVEL_HIGH'],
# 'UART' => ['ALTERNATE', 'PUSHPULL', 'SPEED_HIGH', 'PULLUP', 'LEVEL_HIGH'],
# 'OTG' => ['ALTERNATE', 'PUSHPULL', 'SPEED_HIGH', 'FLOATING', 'LEVEL_HIGH'],
# 'ETH' => ['ALTERNATE', 'PUSHPULL', 'SPEED_HIGH', 'FLOATING', 'LEVEL_HIGH'],
# 'FSMC' => ['ALTERNATE', 'PUSHPULL', 'SPEED_HIGH', 'FLOATING', 'LEVEL_HIGH'],
# 'SDIO' => ['ALTERNATE', 'PUSHPULL', 'SPEED_HIGH', 'PULLUP', 'LEVEL_HIGH'],
# 'SDIOCK' => ['ALTERNATE', 'PUSHPULL', 'SPEED_HIGH', 'FLOATING', 'LEVEL_HIGH'],
# 'CAN' => ['ALTERNATE', 'PUSHPULL', 'SPEED_HIGH', 'FLOATING', 'LEVEL_HIGH'],
# 'DCMI' => ['ALTERNATE', 'PUSHPULL', 'SPEED_HIGH', 'FLOATING', 'LEVEL_HIGH'],
# 'LED' => ['OUTPUT', 'PUSHPULL', 'SPEED_VERYLOW', 'FLOATING', 'LEVEL_LOW'],
# 'PASSIVE' => ['INPUT', 'PUSHPULL', 'SPEED_VERYLOW', 'FLOATING', 'LEVEL_LOW']);
#
# SYSTEM
A13	SWDIO           SWDIO           AF:DEBUG_JTMS-SWDIO
A14	SWCLK           SWDIO           AF:DEBUG_JTCK-SWCLK
H00     OSC_IN    SYS  AF0
H01     OSC_OUT   SYS  AF0
#C14     OSC32_IN  SYS  AF0 
#C15     OSC32_OUT SYS  AF0


#DEFAULT
DEFAULT                 INPUT   PUSHPULL SPEED_VERYLOW PULLDOWN LEVEL_LOW  AF0



# ACTIVE PINS

# UART1
PA09    UART1_TX	    UART	    AF:USART1_TX
PA10    UART1_RX	    UART	    AF:USART1_RX
# UART2: VTX-HD
PA02    UART2_TX	    UART	    AF:USART2_TX
PA03    UART2_RX	    UART	    AF:USART2_RX
# UART3: GPS
PD08    UART3_TX	    UART	    AF:USART3_TX
PD09    UART3_RX	    UART	    AF:USART3_RX
# UART4
PA00    UART4_TX	    UART	    AF:UART4_TX
PA01    UART4_RX	    UART	    AF:UART4_RX
# UART6: RCIN
PC06    UART6_TX	    UART	    AF:USART6_TX
PC07    UART6_RX	    UART	    AF:USART6_RX
# UART7: ESC_Telemetry
PE07    UART7_RX   	    UART	    AF:UART7_RX
# UART8
PE01    UART8_TX	    UART	    AF:UART8_TX
PE00    UART8_RX	    UART	    AF:UART8_RX

# I2C1
PB06    I2C1_SCL        I2C		    AF:I2C1_SCL
PB07    I2C1_SDA        I2C		    AF:I2C1_SDA
# I2C2
PB10    I2C2_SCL        I2C		    AF:I2C2_SCL
PB11    I2C2_SDA        I2C		    AF:I2C2_SDA

# SPI2
PC02    SPI2_MISO       SPI		    AF:SPI2_MISO 
PC03    SPI2_MOSI       SPI		    AF:SPI2_MOSI
PD03    SPI2_SCK        SPI		    AF:SPI2_SCK
PA15    SPI_SLAVE0      OUTPUT	PUSHPULL  SPEED_HIGH FLOATING LEVEL_HIGH    # BMI270
PD05    SPI_SLAVE1      OUTPUT	PUSHPULL  SPEED_HIGH FLOATING LEVEL_HIGH    # BMI088_GYRO
PD04    SPI_SLAVE2      OUTPUT	PUSHPULL  SPEED_HIGH FLOATING LEVEL_HIGH    # BMI088_ACCEL

# USB
PA11    OTG_FS_DM	    OTG		    AF:USB_OTG_FS_DM   
PA12    OTG_FS_DP	    OTG		    AF:USB_OTG_FS_DP

# SDMMC
PC08	SDMMC1_D0	    SDIO	AF:SDMMC1_D0 
PC09	SDMMC1_D1	    SDIO	AF:SDMMC1_D1 
PC10	SDMMC1_D2	    SDIO	AF:SDMMC1_D2 
PC11	SDMMC1_D3	    SDIO	AF:SDMMC1_D3 
PC12	SDMMC1_CK	    SDIO	AF:SDMMC1_CK 
PD02	SDMMC1_CMD	    SDIO	AF:SDMMC1_CMD 

# BATTERY
PC00    ADC1	    ADC		    ADC3_INP10 ()
PC01    ADC6	    ADC		    ADC3_INP11 ()

# motors
PE14    M1		        PWM         AF:TIM1_CH4 PULLUP ()
PE13    M2		        PWM         AF:TIM1_CH3 PULLUP ()
PE11    M3		        PWM         AF:TIM1_CH2 PULLUP ()
PE09    M4		        PWM         AF:TIM1_CH1 PULLUP ()
PB01    M5		        PWM         AF:TIM3_CH4 PULLUP ()
PB00    M6		        PWM         AF:TIM3_CH3 PULLUP ()
PD12    M7		        PWM         AF:TIM4_CH1 PULLUP ()
PD13    M8		        PWM         AF:TIM4_CH2 PULLUP ()

# LED STRIP
PD14    LED_STRIP       PWM         AF:TIM4_CH3 PULLUP ()
# BEEPER
PD15    BEEPER          PWM         AF:TIM4_CH4 PULLUP ()

PE04    LED1            LED # LUE
PE05    LED2            LED # RED
PE06    LED3            LED # GREEN
