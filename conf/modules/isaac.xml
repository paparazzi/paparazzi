<!DOCTYPE module SYSTEM "module.dtd">

<module name="isaac" dir="cartography">
  <doc>
    <description>
    ISaAC: The Intelligent Safety and Airworthiness Co-Pilot module
    Based on paper "A Payload Verification and Management Framework
    for Small UAV-based Personal Remote Sensing Systems" by Cal Coopmans
    and Chris Coffin. Link: http://ieeexplore.ieee.org/abstract/document/6309316/

    ISaAC is intented mainly for mapping applications.

    This module processes messages from ISaAC, and either forwards them to the GCS
    (such as CAMERA_SNAPSHOT or CAMERA_PAYLOAD messages), or responds to them necessary
    (such as MOVE_WP).

    The module assumes the source of the messages is trusted (i.e. not authentication besides 
    AC_ID check is performed).
    </description>
  </doc>

  <settings>
    <dl_settings NAME="ISaAC">
      <dl_settings NAME="Isaac">
        <dl_setting MAX="1" MIN="0" STEP="1" VAR="send_cam_snapshot" shortname="snapshot"/>
        <dl_setting MAX="1" MIN="0" STEP="1" VAR="send_cam_payload" shortname="payload"/>
        <dl_setting MAX="1" MIN="0" STEP="1" VAR="send_copilot_status" shortname="copilot"/>
        <dl_setting MAX="254" MIN="0" STEP="1" VAR="snapshot_cnt" shortname="snapshot_cnt"/>
        <dl_setting MAX="254" MIN="0" STEP="1" VAR="status_cnt" shortname="status_cnt"/>
        <dl_setting MAX="254" MIN="0" STEP="1" VAR="isaac_cnt" shortname="isaac_cnt"/>
        <dl_setting MAX="254" MIN="0" STEP="1" VAR="move_wp_cnt" shortname="move_wp_cnt"/>
      </dl_settings>
    </dl_settings>
  </settings>

  <depends>extra_dl</depends>
  <header>
    <file name="isaac.h"/>
  </header>
  <init fun="isaac_init()"/>
  <periodic fun="isaac_periodic()" freq="1." autorun="TRUE"/>
  <datalink message="CAMERA_SHOT" fun="isaac_parse_cam_snapshot_dl(buf)"/>
  <datalink message="CAMERA_PAYL" fun="isaac_parse_cam_payload_dl(buf)"/>
  <datalink message="COPILOT_STAT" fun="isaac_parse_copilot_status_dl(buf)"/>
  <datalink message="MOVE_WP" fun="isaac_parse_move_wp_dl(buf)"/>
  <makefile target="ap">
    <file name="isaac.c"/>
  </makefile>
</module>

