<airframe name="IMU">

  <makefile>

ARCHI=arm7
imu.ARCHDIR = $(ARCHI)
imu.ARCH = arm7tdmi
imu.TARGET = imu
imu.TARGETDIR = imu

LPC21ISP_BAUD = 38400
LPC21ISP_XTAL = 12000

FLASH_MODE = IAP
#FLASH_MODE = ISP

imu.CFLAGS += -DCONFIG=\"pprz_imu.h\"
imu.srcs = main_imu.c sys_time.c $(SRC_ARCH)/sys_time_hw.c $(SRC_ARCH)/armVIC.c

#imu.CFLAGS += -DUSE_UART0 -DUART0_BAUD=B38400
imu.srcs += $(SRC_ARCH)/uart_hw.c

imu.CFLAGS += -DUSE_UART1 -DUART1_BAUD=B9600 -DDOWNLINK -DDOWNLINK_TRANSPORT=PprzTransport -DDOWNLINK_DEVICE=Uart1 
imu.srcs += downlink.c pprz_transport.c

imu.CFLAGS += -DADC -DUSE_AD0 -DUSE_AD0_1 -DUSE_AD0_2 -DUSE_AD0_3 -DUSE_AD0_4
imu.srcs += $(SRC_ARCH)/adc_hw.c

imu.srcs += $(SRC_ARCH)/max1167.c
imu.srcs += $(SRC_ARCH)/micromag.c

imu.srcs += imu_v3.c

imu.srcs += ahrs_new.c

  </makefile>

</airframe>


